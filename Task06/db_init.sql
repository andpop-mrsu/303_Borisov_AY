DROP TABLE IF EXISTS students;
DROP TABLE IF EXISTS directions;
DROP TABLE IF EXISTS groups;
DROP TABLE IF EXISTS subjects;
DROP TABLE IF EXISTS plan;
DROP TABLE IF EXISTS exams;

PRAGMA foreign_keys=ON;

CREATE TABLE students(
		id INTEGER PRIMARY KEY, 
		surname TEXT NOT NULL,		
		name TEXT NOT NULL, 
		patronymic TEXT, 
		bdate DATA NOT NULL, 
		gender BOOLEAN NOT NULL,
		enter_date DATA NOT NULL
);


INSERT INTO students 
VALUES
(1, 'Ашрятова', 'Римма', 'Равильевна', '2000-11-23', 0,'2018-09-01'),
(2, 'Борисов', 'Александр', 'Юрьевич', '2000-04-16', 1,'2018-09-01'),
(3, 'Гарин', 'Максим', 'Александрович', '2000-07-04', 1,'2018-09-01'),
(4, 'Головатюк', 'Анастасия', 'Михайловна', '2000-11-13', 0,'2018-09-01'),
(5, 'Горбунов', 'Андрей', 'Александрович', '2000-06-11', 1,'2018-09-01'),
(6, 'Гуськов', 'Артем', 'Сергеевич', '2000-05-04', 1,'2018-09-01'),
(7, 'Дворянинова', 'Дарья', 'Алексеевна', '2000-07-15', 0,'2018-09-01'),
(8, 'Еделева', 'Юлия', 'Павловна', '2000-08-22', 0,'2018-09-01'),
(9, 'Зевайкин', 'Андрей', 'Евгеньевич', '2000-03-07', 1,'2018-09-01'),
(10, 'Исоков', 'Асадбек', 'Анваржонович', '2000-07-13', 1,'2018-09-01'),
(11, 'Казакова', 'Ирина', 'Сергеевна', '2000-02-12', 0,'2018-09-01'),
(12, 'Квашнин', 'Кирилл', 'Алексеевич', '1999-03-06', 1,'2018-09-01'),
(13, 'Кирдюшкин', 'Данила', 'Владимирович', '2000-09-30', 1,'2018-09-01');

CREATE TABLE directions(
		id INTEGER PRIMARY KEY,
		name TEXT NOT NULL
);

INSERT INTO directions 
VALUES 
(1, 'Математика и компьютерные науки'),
(2, 'Фундаментальная информатика'),
(3, 'Прикладная математика и информатика'),
(4, 'Програмная инженирия');

CREATE TABLE groups(
		id INTEGER PRIMARY KEY,
		student_id INTEGER NOT NULL,
		direction_id INTEGER NOT NULL,
		FOREIGN KEY (student_id) REFERENCES students(id) ON DELETE CASCADE,
		FOREIGN KEY (direction_id) REFERENCES directions(id) ON DELETE CASCADE	
);

INSERT INTO groups(id, student_id, direction_id)
VALUES
(1,1,3),
(2,2,3),
(3,3,3),
(4,4,3),
(5,5,3),
(6,6,3),
(7,7,3),
(8,8,3),
(9,9,3),
(10,10,3),
(11,11,3),
(12,11,3),
(13,11,3);

CREATE TABLE subjects(
		id INTEGER PRIMARY KEY,
		ind TEXT,
		name TEXT NOT NULL,
		cert_type1 INTEGER  NULL CHECK(cert_type1 = 0 or cert_type1 = 1 or cert_type1 = NULL),
		study_time1 INTEGER  NULL,
		cert_type2 INTEGER  NULL CHECK(cert_type2 = 0 or cert_type2 = 2 or cert_type2 = NULL),
		study_time2 INTEGER NULL,
		course INTEGER NOT NULL
);

INSERT INTO subjects(id, ind, name, cert_type1, study_time1, cert_type2, study_time2, course) 
VALUES
(1,	'Б1.Б.2','История',	1,144,NULL, NULL,1),		
(2,	'Б1.Б.6','Иностранный язык',0,108,0,8,1),
(3,	'Б1.Б.9','Физическая культура',0,72,NULL,0,1),			
(4,	'Б1.Б.10','Безопасность жизнедеятельности',	NULL, 0,0,	72,1),
(5,	'Б1.Б.11','Математический анализ-I', 10, 180, NULL,0,1),			
(6,	'Б1.Б.12','Математический анализ-II',NULL, 0, 10, 180, 1),
(7,	'Б1.Б.17','Алгебра и геометрия', 1, 144, 1, 144, 1),
(8,	'Б1.Б.19','Основы информатики',	NULL, 0, 0, 72, 1),
(9,	'Б1.Б.20','Архитектура компьютеров', NULL, 0, 0, 72, 1),
(10,'Б1.Б.25','	Языки и методы программирования', 0, 108,1,	108,1),
(11,'Б1.В.ОД.3','Аналитическая геометрия',1, 180, NULL, 0, 1),			
(12,'Б1.В.ОД.4','Структуры данных', NULL, 0, 1,	144,1),
(13, NULL,	'Элективные курсы по физической культуре',NULL, 0, 0, 108, 1),
(14,'Б1.В.ДВ.5.1', 'Введение в направление', 0, 108, NULL, 0, 1),			
(15,'Б1.В.ДВ.5.2', 'Теория множеств', 0, 108, NULL, 0, 1),				
(16,'Б1.В.ДВ.13.1', 'Нечеткие множества', NULL, 0, 0, 72,1),
(17,'Б1.В.ДВ.13.2', 'Булевы алгебры', NULL, 0, 0, 72, 1);

CREATE TABLE plan(
        id INTEGER PRIMARY KEY,
		direction_id INTEGER NOT NULL,
		subject_id INTEGER NOT NULL,
		FOREIGN KEY (direction_id) REFERENCES directions(id) ON DELETE CASCADE,
		FOREIGN KEY (subject_id) REFERENCES subjects(id) ON DELETE CASCADE		
);

INSERT INTO plan(id, direction_id, subject_id) VALUES
(1,	3, 1),		
(2,	3, 2),
(3,	3, 3),			
(4,	3, 4),
(5,	3, 5),			
(6, 3, 6),
(7, 3, 7),
(8,	3, 8),
(9,	3, 9),
(10,3, 10),
(11,3, 11),			
(12,3, 12),
(13,3, 13),
(14,3, 14),			
(15,3, 15),				
(16,3, 16),
(17,3, 17);


CREATE TABLE exams(
		id INTEGER PRIMARY KEY,
		student_id INTEGER,
		subject_id INTEGER,
		points INTEGER NOT NULL DEFAULT 0 CHECK(points <= 100 and points>=0),
		FOREIGN KEY (subject_id) REFERENCES subjects(id) ON DELETE CASCADE,
		FOREIGN KEY (student_id) REFERENCES students(id) ON DELETE CASCADE
);

INSERT INTO exams(id, student_id, subject_id, points)
VALUES
(1, 1, 1, 83),
(2, 1, 2, 86),
(3, 1, 3, 97),
(4, 1, 4, 95),
(5, 1, 5, 93),
(6, 1, 6, 95),
(7, 1, 7, 86),
(8, 1, 8, 92),
(9, 1, 9, 89),
(10, 1, 10, 81),
(11, 1, 11, 82),
(12, 1, 12, 87),
(13, 1, 13, 90),
(14, 1, 14, 99),
(15, 1, 15, 83),
(16, 1, 16, 86),
(17, 1, 17, 80),
(18, 2, 1, 86),
(19, 2, 2, 92),
(20, 2, 3, 96),
(21, 2, 4, 91),
(22, 2, 5, 88),
(23, 2, 6, 87),
(24, 2, 7, 89),
(25, 2, 8, 82),
(26, 2, 9, 90),
(27, 2, 10, 82),
(28, 2, 11, 83),
(29, 2, 12, 87),
(30, 2, 13, 95),
(31, 2, 14, 89),
(32, 2, 15, 82),
(33, 2, 16, 82),
(34, 2, 17, 98),
(35, 3, 1, 89),
(36, 3, 2, 87),
(37, 3, 3, 93),
(38, 3, 4, 96),
(39, 3, 5, 91),
(40, 3, 6, 82),
(41, 3, 7, 89),
(42, 3, 8, 93),
(43, 3, 9, 81),
(44, 3, 10, 99),
(45, 3, 11, 84),
(46, 3, 12, 97),
(47, 3, 13, 98),
(48, 3, 14, 84),
(49, 3, 15, 95),
(50, 3, 16, 90),
(51, 3, 17, 93),
(52, 4, 1, 86),
(53, 4, 2, 91),
(54, 4, 3, 80),
(55, 4, 4, 96),
(56, 4, 5, 93),
(57, 4, 6, 82),
(58, 4, 7, 90),
(59, 4, 8, 96),
(60, 4, 9, 81),
(61, 4, 10, 85),
(62, 4, 11, 85),
(63, 4, 12, 84),
(64, 4, 13, 87),
(65, 4, 14, 96),
(66, 4, 15, 85),
(67, 4, 16, 86),
(68, 4, 17, 89),
(69, 5, 1, 93),
(70, 5, 2, 97),
(71, 5, 3, 84),
(72, 5, 4, 95),
(73, 5, 5, 82),
(74, 5, 6, 85),
(75, 5, 7, 94),
(76, 5, 8, 87),
(77, 5, 9, 94),
(78, 5, 10, 84),
(79, 5, 11, 83),
(80, 5, 12, 90),
(81, 5, 13, 87),
(82, 5, 14, 88),
(83, 5, 15, 96),
(84, 5, 16, 98),
(85, 5, 17, 88),
(86, 6, 1, 84),
(87, 6, 2, 83),
(88, 6, 3, 91),
(89, 6, 4, 94),
(90, 6, 5, 99),
(91, 6, 6, 92),
(92, 6, 7, 80),
(93, 6, 8, 96),
(94, 6, 9, 88),
(95, 6, 10, 99),
(96, 6, 11, 92),
(97, 6, 12, 86),
(98, 6, 13, 86),
(99, 6, 14, 94),
(100, 6, 15, 99),
(101, 6, 16, 95),
(102, 6, 17, 90),
(103, 7, 1, 94),
(104, 7, 2, 98),
(105, 7, 3, 87),
(106, 7, 4, 81),
(107, 7, 5, 97),
(108, 7, 6, 82),
(109, 7, 7, 97),
(110, 7, 8, 92),
(111, 7, 9, 92),
(112, 7, 10, 96),
(113, 7, 11, 81),
(114, 7, 12, 80),
(115, 7, 13, 86),
(116, 7, 14, 81),
(117, 7, 15, 85),
(118, 7, 16, 89),
(119, 7, 17, 84),
(120, 8, 1, 99),
(121, 8, 2, 80),
(122, 8, 3, 89),
(123, 8, 4, 91),
(124, 8, 5, 97),
(125, 8, 6, 97),
(126, 8, 7, 91),
(127, 8, 8, 81),
(128, 8, 9, 95),
(129, 8, 10, 89),
(130, 8, 11, 87),
(131, 8, 12, 87),
(132, 8, 13, 96),
(133, 8, 14, 97),
(134, 8, 15, 93),
(135, 8, 16, 86),
(136, 8, 17, 85),
(137, 9, 1, 86),
(138, 9, 2, 83),
(139, 9, 3, 99),
(140, 9, 4, 84),
(141, 9, 5, 88),
(142, 9, 6, 91),
(143, 9, 7, 92),
(144, 9, 8, 89),
(145, 9, 9, 83),
(146, 9, 10, 99),
(147, 9, 11, 90),
(148, 9, 12, 88),
(149, 9, 13, 88),
(150, 9, 14, 95),
(151, 9, 15, 80),
(152, 9, 16, 89),
(153, 9, 17, 96),
(154, 10, 1, 83),
(155, 10, 2, 98),
(156, 10, 3, 85),
(157, 10, 4, 86),
(158, 10, 5, 91),
(159, 10, 6, 81),
(160, 10, 7, 95),
(161, 10, 8, 99),
(162, 10, 9, 88),
(163, 10, 10, 84),
(164, 10, 11, 88),
(165, 10, 12, 81),
(166, 10, 13, 90),
(167, 10, 14, 93),
(168, 10, 15, 80),
(169, 10, 16, 94),
(170, 10, 17, 84),
(171, 11, 1, 84),
(172, 11, 2, 94),
(173, 11, 3, 87),
(174, 11, 4, 96),
(175, 11, 5, 83),
(176, 11, 6, 91),
(177, 11, 7, 87),
(178, 11, 8, 85),
(179, 11, 9, 99),
(180, 11, 10, 96),
(181, 11, 11, 92),
(182, 11, 12, 91),
(183, 11, 13, 97),
(184, 11, 14, 88),
(185, 11, 15, 95),
(186, 11, 16, 87),
(187, 11, 17, 94),
(188, 12, 1, 81),
(189, 12, 2, 98),
(190, 12, 3, 95),
(191, 12, 4, 89),
(192, 12, 5, 97),
(193, 12, 6, 95),
(194, 12, 7, 93),
(195, 12, 8, 98),
(196, 12, 9, 88),
(197, 12, 10, 83),
(198, 12, 11, 91),
(199, 12, 12, 88),
(200, 12, 13, 89),
(201, 12, 14, 96),
(202, 12, 15, 84),
(203, 12, 16, 83),
(204, 12, 17, 83),
(205, 13, 1, 93),
(206, 13, 2, 98),
(207, 13, 3, 86),
(208, 13, 4, 80),
(209, 13, 5, 84),
(210, 13, 6, 98),
(211, 13, 7, 88),
(212, 13, 8, 88),
(213, 13, 9, 89),
(214, 13, 10, 97),
(215, 13, 11, 97),
(216, 13, 12, 96),
(217, 13, 13, 84),
(218, 13, 14, 83),
(219, 13, 15, 90),
(220, 13, 16, 83),
(221, 13, 17, 90);









